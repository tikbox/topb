# topb

**topb** is a tool for automatically generating conversion methods from Go structs to Protobuf message types. It parses Go source files and generates corresponding `ToPb` methods, simplifying the process of manually writing these conversion methods.

## Installation

```bash
  go install github.com/tikbox/topb@latest
```

## Usage

In your Go source file, add the following comments for the structs that need to generate `ToPb` methods:

```go
// gen:topb
//
//go:generate topb -in user.go -pb your-git.com/your-pb-path/pb
type User struct {
    Uid  uint32
    Name string
}
```

Then, run the following command in the terminal:

```bash
go generate ./...
```

**topb** will automatically generate a file named `autogen_topb_user.go`, which contains the `ToPb` method for the `User` struct.

## Example

Suppose you have the following struct definition:

```go
// gen:topb
//
//go:generate topb -in user.go -pb your-git.com/your-pb-path/pb
type User struct {
    Uid  uint32
    Name string
}
```

**topb** will generate the following content:

```go
// Code generated by topb; DO NOT EDIT.

package main

import "your-git.com/your-pb-path/pb"

func (u *User) ToPb() *pb.User {
	return &pb.User{
		Uid:  u.Uid,
		Name: u.Name,
	}
}
```

### Custom Import Path

You can specify the import path by adding a comment param -pb:

```go
// gen:topb
//
//go:generate topb -in user.go -pb your-git.com/your-pb-path/pb
type User struct {
    Uid  uint32
    Name string
}

```

In this example, **topb** will import the `"your-git.com/your-pb-path/pb"` package and use it to generate the `ToPb` method.


## License

**topb** is licensed under the [MIT License](LICENSE).

Welcome to use, contribute, and share **topb**!
